!function(e){var a={};function t(s){if(a[s])return a[s].exports;var n=a[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(s,n,function(a){return e[a]}.bind(null,n));return s},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=59)}([function(e,a,t){e.exports=t(1)(0)},function(e,a){e.exports=_xe_dll_common},function(e,a,t){e.exports=t(1)(6)},function(e,a,t){e.exports=t(1)(173)},function(e,a,t){e.exports=t(1)(7)},function(e,a,t){e.exports=t(1)(8)},function(e,a,t){e.exports=t(1)(530)},,function(e,a,t){e.exports=t(1)(27)},function(e,a,t){e.exports=t(1)(115)},,function(e,a,t){e.exports=t(1)(488)},function(e,a,t){e.exports=t(21)},,function(e,a,t){e.exports=t(1)(79)},function(e,a,t){e.exports=t(1)(77)},function(e,a,t){e.exports=t(1)(169)},,,,,function(e,a,t){var s=t(22);e.exports=s},function(e,a,t){t(23);var s=t(24),n=t(25);s.JSON||(s.JSON={stringify:JSON.stringify}),e.exports=function(e,a,t){return n(s.JSON.stringify,null,arguments)}},function(e,a,t){e.exports=t(1)(545)},function(e,a,t){e.exports=t(1)(21)},function(e,a,t){e.exports=t(1)(117)},function(e,a,t){e.exports=t(1)(92)},,,,function(e,a,t){e.exports=t(1)(216)},function(e,a,t){e.exports=t(1)(58)},function(e,a,t){e.exports=t(1)(103)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){"use strict";t.r(a);var s=t(4),n=t.n(s),r=t(5),l=t.n(r),c=(t(8),t(15),t(16),t(14),t(31),t(32),t(60),t(30),t(2)),i=t.n(c),o=t(9),u=t.n(o),p=t(11),d=t.n(p),g=t(3),v=t.n(g),f=t(26),h=t.n(f),m=t(12),_=t.n(m),x=t(0),y=t.n(x),b=t(6),R={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27},T=function(){function e(a){var t=a.$wrapper,s=a.key,r=a.userSearchUrl,l=a.groupSearchUrl,c=a.permission,i=a.type,o=a.vgroupAll;n()(this,e),this.$wrapper=t,this.key=s,this.userSearchUrl=r,this.groupSearchUrl=l,this.permission=c,this.type=i,this.vgroupAll=o,this.query="",this.suggestion=[],this.placeholder=b.default.Lang.trans("xe::explainIncludeUserOrGroup"),this.selectedIndex="",this.includeSelectedIndex=-1,this.excludeSelectedIndex=-1,this.MIN_QUERY_LENGTH=2}return l()(e,[{key:"bindEvents",value:function(){var e,a,t=this;this.$wrapper.on("change",".chkModeAble",(function(e){var a,s;y()(e.target).is(":checked")?i()(a=t.$wrapper).call(a,"input:not(.chkModeAble)").prop("disabled",!0):i()(s=t.$wrapper).call(s,"input:not(.chkModeAble)").prop("disabled",!1)})),this.$wrapper.on("keydown",".inputUserGroup",(function(e){var a,s,n=u()(a=e.target.value).call(a),r=y()(this),l=e.keyCode,c=i()(s=r.parent()).call(s,".ReactTags__suggestions ul"),o=r.data("input");if(n.length>=t.MIN_QUERY_LENGTH){if(c.length>0){var p=parseInt(r.data("index"),10),g=0;switch(l){case R.UP_ARROW:g=0==p?i()(c).call(c,"li").length-1:p-1,r.data("index",g),i()(c).call(c,"li").eq(g).addClass("active").siblings().removeClass("active");break;case R.DOWN_ARROW:g=p==i()(c).call(c,"li").length-1?0:p+1,r.data("index",g),i()(c).call(c,"li").eq(g).addClass("active").siblings().removeClass("active");break;case R.ENTER:case R.TAB:if(e.preventDefault(),i()(c).call(c,"li.active").length>0){var f,h=i()(c).call(c,"li.active").data("tag"),m="",_="",x="";"user"===c.data("target")?"include"===o?(m=t.type+"User",_="user",x="@"):(m=t.type+"Except",_="except",x="@"):(m=t.type+"Group",_="group",x="%");var b=t.permission[_],T=!1;b.length>0?(b.forEach((function(e,a){e.id===h.id&&(T=!0)})),T||t.permission[_].push(h)):t.permission[_].push(h);var k,E,U,A,S=d()(f=t.permission[_]).call(f,(function(e){return e.id}));if(!T)i()(k=c.closest(".ReactTags__tags")).call(k,"[name="+m+"]").val(u()(E=S.join()).call(E)),i()(U=c.closest(".ReactTags__tags")).call(U,"."+_+"Wrap").append(v()(A='<span class="ReactTags__tag">'.concat(x+(h.display_name||h.name),'<a class="ReactTags__remove btnRemoveTag" data-id="')).call(A,h.id,'">x</a></span>'));c.remove(),r.val("").data("index",-1).focus()}e.preventDefault();break;case R.ESCAPE:t[o+"SelectedIndex"]=0,c.parent().empty(),r.focus()}}}else if(R.BACKSPACE===l){var O,w=i()(O=r.closest(".ReactTags__tags")).call(O,".ReactTags__selected span");!n&&w.length>0&&t.removeTag(w.eq(w.length-1))}})),i()(e=this.$wrapper).call(e,".ReactTags__suggestions").on("mouseenter","li",(function(){y()(this).addClass("active").siblings().removeClass("active")})),i()(a=this.$wrapper).call(a,".ReactTags__suggestions").on("click","li",(function(){var e,a,s=y()(this),n=s.data("tag"),r=s.closest("ul"),l=i()(e=s.closest(".ReactTags__tagInput")).call(e,"input:text"),c=l.data("input"),o="",p="",g="";"user"===r.data("target")?"include"===c?(o=t.type+"User",p="user",g="@"):(o=t.type+"Except",p="except",g="@"):(o=t.type+"Group",p="group",g="%");var f=t.permission[p],h=!1;f.length>0?(f.forEach((function(e,a){e.id===n.id&&(h=!0)})),h||t.permission[p].push(n)):t.permission[p].push(n);var m,_,x,b,R=d()(a=t.permission[p]).call(a,(function(e){return e.id}));h||(i()(m=r.closest(".ReactTags__tags")).call(m,"[name="+o+"]").val(u()(_=R.join()).call(_)),i()(x=r.closest(".ReactTags__tags")).call(x,"."+p+"Wrap").append(v()(b='<span class="ReactTags__tag">'.concat(g+(n.display_name||n.name),'<a class="ReactTags__remove btnRemoveTag" data-id="')).call(b,n.id,'">x</a></span>')));r.remove(),l.val("").data("index",-1).focus()})),this.$wrapper.on("keyup",".inputUserGroup",(function(e){var a,s,n=u()(a=e.target.value).call(a),r=y()(this),l=e.keyCode;if(n.length>=t.MIN_QUERY_LENGTH){if(-1==[R.ENTER,R.TAB,R.UP_ARROW,R.DOWN_ARROW,R.ESCAPE,37,39].indexOf(l)){var c;switch("<ul>",'<li>Searching ... <span class="spinner" role="spinner"><span class="spinner-icon"></span></span></li>',"</ul>",i()(c=r.parent()).call(c,".ReactTags__suggestions").html('<ul><li>Searching ... <span class="spinner" role="spinner"><span class="spinner-icon"></span></span></li></ul>'),n.substr(0,1)){case"@":n=n.substr(1,n.length),t.searchUser(r,n);break;case"%":n=n.substr(1,n.length),t.searchGroup(r,n)}}}else i()(s=r.parent()).call(s,".ReactTags__suggestions").empty()})),this.$wrapper.on("click",".btnRemoveTag",(function(e){e.preventDefault(),t.removeTag(y()(this).closest("span"))}))}},{key:"makeIt",value:function(e,a){var t=u()(a).call(a).replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),s=RegExp(t,"gi");return(e.display_name||e.name).replace(s,"<mark>$&</mark>")}},{key:"removeTag",value:function(e){var a,t,s,n=this,r=e.closest(".ReactTags__selected").data("ptype"),l=e.data("id"),c="";switch(r){case"user":c=n.type+"User";break;case"except":c=n.type+"Except";break;case"group":c=n.type+"Group"}n.permission[r].forEach((function(e,a){var t;e.id!==l&&h()(t=n.permission[r]).call(t,a,1)}));var o=d()(a=n.permission[r]).call(a,(function(e){return e.id}));i()(t=e.closest(".ReactTags__tags")).call(t,"[name="+c+"]").val(u()(s=o.join()).call(s)),e.remove()}},{key:"searchUser",value:function(e,a){var t=this,s=t.userSearchUrl;b.default.ajax({url:s+"/"+a,method:"get",dataType:"json",cache:!1,success:function(s){if(s.length>0){var n,r="";r+='<ul data-target="user">',s.forEach((function(e,s){r+='<li class="" data-tag=\''.concat(_()(e),"'>"),r+="<span>".concat(t.makeIt(e,a),"</span>"),r+="</li>"})),r+="</ul>",i()(n=e.parent()).call(n,".ReactTags__suggestions").html(r)}else{var l;i()(l=e.parent()).call(l,".ReactTags__suggestions").empty()}},error:function(e,a,t){}})}},{key:"searchGroup",value:function(e,a){var t=this,s=t.groupSearchUrl;b.default.ajax({url:s+"/"+a,method:"get",dataType:"json",cache:!1,success:function(s){if(s.length>0){var n,r="";r+='<ul data-target="group">',s.forEach((function(e,s){r+="<li data-tag='".concat(_()(e),"'>"),r+="<span>".concat(t.makeIt(e,a),"</span>"),r+="</li>"})),r+="</ul>",i()(n=e.parent()).call(n,".ReactTags__suggestions").html(r)}else{var l;i()(l=e.parent()).call(l,".ReactTags__suggestions").empty()}},error:function(e,a,t){}})}},{key:"render",value:function(){var e,a,t,s,n,r,l,c,i,o,p,g=this,f=this.permission.mode,h=this.permission.rating,m=!1,_=[{value:"super",name:b.default.Lang.trans("xe::userRatingAdministrator")},{value:"manager",name:b.default.Lang.trans("xe::userRatingManager")},{value:"user",name:b.default.Lang.trans("xe::user")},{value:"guest",name:b.default.Lang.trans("xe::guest")}],x=!1;"manual"!==f&&"inherit"!==f||(m=!0,"manual"!==f&&(x=!0));var y,R=d()(e=this.permission.group).call(e,(function(e){return e.id})),T=d()(a=this.permission.user).call(a,(function(e){return e.id})),k=d()(t=this.permission.except).call(t,(function(e){return e.id})),E="";if(E+="<div>",m){var U,A,S="inherit"===f?'checked="checked"':"";E+='<div class="form-group">',E+='<div class="checkbox">',E+=v()(U=v()(A='<label><input type="checkbox" name="'.concat(this.type+"Mode",'" class="chkModeAble" value="inherit" ')).call(A,S," /> ")).call(U,b.default.Lang.trans("xe::inheritMode"),"</label>"),E+="</div>",E+="</div>"}(E+='<div class="form-group">',E+="<label>".concat(b.default.Lang.trans("xe::userRating"),"</label>"),E+='<div class="radio">',_.forEach((function(e){var a,t,s,n,r=e.value==h?"checked":"";E+=v()(a=v()(t=v()(s=v()(n='<label><input type="radio" '.concat(x?'disabled="disabled"':"",' name="')).call(n,g.type+"Rating",'" value="')).call(s,e.value,'" ')).call(t,r?'checked="checked"':""," /> ")).call(a,e.name," &nbsp;</label>")})),E+="</div>",E+="</div>",E+='<div class="form-group">',E+="<label>".concat(b.default.Lang.trans("xe::includeUserOrGroup"),"</label>"),E+='<div class="ReactTags__tags">',E+='<div class="ReactTags__selected groupWrap" data-ptype="group">',this.permission.group.forEach((function(e){var a,t=e,s="%"+(t.display_name||t.name);E+=v()(a='<span class="ReactTags__tag">'.concat(s,'<a href="#" class="ReactTags__remove btnRemoveTag" data-id="')).call(a,t.id,'">x</a></span>')})),E+="</div>",E+='<div class="ReactTags__selected userWrap" data-ptype="user">',this.permission.user.forEach((function(e){var a,t="@"+(e.display_name||e.name);E+=v()(a='<span class="ReactTags__tag">'.concat(t,'<a href="#" class="ReactTags__remove btnRemoveTag" data-id="')).call(a,e.id,'|">x</a></span>')})),E+="</div>",E+='<div class="ReactTags__tagInput">',E+=v()(s=v()(n='<input type="text" placeholder="'.concat(this.placeholder,'" class="form-control inputUserGroup" data-input="include" ')).call(n,x?'disabled="disabled"':"",' value="')).call(s,this.query,'" data-index="-1" />'),E+='<div class="ReactTags__suggestions" data-input="include"></div>',E+="</div>",E+=v()(r='<input type="hidden" name="'.concat(this.type+"Group",'" class="form-control includeGroups" value="')).call(r,u()(l=R.join()).call(l),'" />'),E+=v()(c='<input type="hidden" name="'.concat(this.type+"User",'" class="form-control includeUsers" value="')).call(c,u()(i=T.join()).call(i),'" />'),E+="</div>",E+="</div>",this.vgroupAll.length>=1)&&(E+='<div class="form-group">',E+="<label>".concat(b.default.Lang.trans("xe::includeVGroup"),"</label>"),E+=d()(y=g.vgroupAll).call(y,(function(e){var a,t,s,n,r=!1;return-1!=function(e,a){for(var t=0;t<a.length;t++)if(a[t]==e)return t;return-1}(e.id,this.permission.vgroup)&&(r=!0),v()(a=v()(t=v()(s=v()(n='<label><input type="checkbox" '.concat(x?'disabled="disabled"':"",' name="')).call(n,g.type+"VGroup[]",'" value="')).call(s,e.id,'" ')).call(t,r?'checked="checked"':""," /> ")).call(a,e.title," &nbsp;</label>")})),E+="</div>");E+='<div class="form-group">',E+="<label>".concat(b.default.Lang.trans("xe::excludeUser"),"</label>"),E+='<div class="ReactTags__tags">',E+='<div class="ReactTags__selected exceptWrap" data-ptype="except">',this.permission.except.forEach((function(e){var a,t=e.display_name||e.name;t="@"+t,E+=v()(a='<span class="ReactTags__tag">'.concat(t,'<a href="#" class="ReactTags__remove btnRemoveTag" data-id="')).call(a,e.id,'">x</a></span>')})),E+="</div>",E+='<div class="ReactTags__tagInput">',E+=v()(o='<input type="text" placeholder="'.concat(b.default.Lang.trans("xe::explainExcludeUser"),'" class="form-control inputUserGroup" data-input="exclude" ')).call(o,x?'disabled="disabled"':"",' data-index="-1" />'),E+='<div class="ReactTags__suggestions" data-input="exclude"></div>',E+="</div>",E+=v()(p='<input type="hidden" name="'.concat(this.type+"Except",'" class="form-control excludeUsers" value="')).call(p,k,'" />'),E+="</div>",E+="</div>",E+="</div>",this.$wrapper.html(E)}}]),e}();y()(".__xe__uiobject_permission").each((function(e){var a=y()(this),t=a.data("data"),s=a.data("key"),n=a.data("type"),r=a.data("userUrl"),l=a.data("groupUrl"),c=a.data("vgroupAll"),i=new T({$wrapper:a,key:s,userSearchUrl:r,groupSearchUrl:l,permission:t,type:n,vgroupAll:c});i.render(),i.bindEvents()}))},function(e,a,t){e.exports=t(1)(309)}]);