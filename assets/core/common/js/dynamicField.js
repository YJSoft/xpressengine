!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=56)}({0:function(t,e,n){t.exports=n(1)(0)},1:function(t,e){t.exports=_xe_dll_common},14:function(t,e,n){t.exports=n(1)(79)},15:function(t,e,n){t.exports=n(1)(77)},2:function(t,e,n){t.exports=n(1)(6)},43:function(t,e,n){t.exports=n(1)(527)},56:function(t,e,n){"use strict";n.r(e);n(8),n(15),n(14);var a=n(2),o=n.n(a),i=n(0),r=n.n(i),c=n(43),l=function(){this.group="",this.databaseName="",this.containerName="",this.$container="",this.init=function(t,e){var n,a,i;t&&e&&(this.group=t,this.databaseName=e,this.containerName="__xe_container_DF_setting_"+t,this.$container=r()("#"+this.containerName),this.$container.$form=o()(n=this.$container).call(n,".__xe_add_form")||r()(this.$container.data("form")),this.$container.$modal=o()(a=this.$container).call(a,".__xe_df_modal"),this.$container.$modal.$body=o()(i=this.$container.$modal).call(i,".modal-body"),this.validator=new c.default,this.attachEvent(),this.closeAll=function(){this.$container.$modal.xeModal("hide")})},this.attachEvent=function(){var t=this;this.$container.on("click",".__xe_btn_add",(function(){var e;t.$container.$modal.$body.html(t.formClone()),t.$container.$modal.xeModal("show");var n=o()(e=t.$container.$modal).call(e,".dynamic-lang-editor-box");n.addClass("lang-editor-box"),n.each((function(t,e){window.langEditorBoxRender(r()(e))}))})),this.$container.on("click",".__xe_btn_submit",(function(){t.store(this)})),this.$container.on("click",".__xe_btn_close",(function(){t.close(this)})),this.$container.on("click",".__xe_btn_edit",(function(e){e.preventDefault(),t.closeAll(),t.edit(this)})),this.$container.on("click",".__xe_btn_delete",(function(e){e.preventDefault(),t.destroy(this),t.closeAll()})),this.$container.on("change",".__xe_type_id",(function(e){var n=r()(this).closest("form"),a=o()(n).call(n,'[name="skinId"]');o()(a).call(a,"option").remove(),a.prop("disabled",!0),t.getSkinOption(n)})),this.$container.on("change",".__xe_skin_id",(function(e){var n=r()(this).closest("form");t.getAdditionalConfigure(n)})),this.$container.on("click",".__xe_checkbox-config",(function(t){var e=r()(t.target),n=r()(this).closest("form");o()(n).call(n,'[name="'+e.data("name")+'"]').val(1==e.prop("checked")?"true":"false")}))},this.getFormContainer=function(t){return t.closest(".__xe_form_container")},this.close=function(t){r()(t).closest("form").remove(),this.$container.$modal.xeModal("hide")},this.getList=function(){if(this.group){var t={group:this.group},e=this;window.XE.ajax({context:this.$container[0],type:"get",dataType:"json",data:t,url:window.XE.route("manage.dynamicField.index")}).done((function(t,n,a){var i;for(var r in o()(i=e.$container).call(i,"#df-tbody tr").remove(),t.list)e.addrow(t.list[r])}))}},this.formClone=function(){var t=this.$container.$form.clone().removeClass("__xe_add_form");return t.show(),t},this.addrow=function(t){var e,n,a,i,r,c,l=o()(e=this.$container).call(e,".__xe_row").clone();(l.removeClass("__xe_row"),l.addClass("__xe_row_"+t.id),l.data("id",t.id),o()(l).call(l,"td.__xe_column_id").html(t.id),o()(l).call(l,"td.__xe_column_label").html(t.label),o()(l).call(l,"td.__xe_column_typeName").html(t.typeName),o()(l).call(l,"td.__xe_column_skinName").html(t.skinName),o()(l).call(l,"td.__xe_column_use").html(1==t.use?"True":"False"),0!=o()(n=o()(a=this.$container).call(a,".__xe_tbody")).call(n,".__xe_row_"+t.id).length)?o()(i=o()(r=this.$container).call(r,".__xe_tbody")).call(i,".__xe_row_"+t.id).replaceWith(l.show()):(this.removeRow(t.id),o()(c=this.$container).call(c,".__xe_tbody").append(l.show()))},this.removeRow=function(t){var e,n;o()(e=o()(n=this.$container).call(n,".__xe_tbody")).call(e,".__xe_row_"+t).remove()},this.edit=function(t){var e=r()(t).closest("tr, .__dynamic-field-row").data("id"),n=this.formClone();n.data("isEdit","1"),n.attr("action",window.XE.route("manage.dynamicField.update")),this.$container.$modal.$body.html(n),this.$container.$modal.xeModal("show");var a={group:this.group,id:e},i=this;window.XE.ajax({context:this.$container.$modal.$body[0],type:"get",dataType:"json",data:a,url:window.XE.route("manage.dynamicField.getEditInfo"),success:function(t){console.debug("form",n),o()(n).call(n,'[name="id"]').val(t.config.id).prop("readonly",!0),o()(n).call(n,'[name="typeId"] option').each((function(){var e=r()(this);e.val()!=t.config.typeId&&e.remove()}));var e=o()(n).call(n,".dynamic-lang-editor-box");e.addClass("lang-editor-box"),e.each((function(e,n){r()(n).data("lang-key",t.config[r()(n).data("name")]),window.langEditorBoxRender(r()(n))})),o()(n).call(n,'[name="use"]').val(i.checkBox(t.config.use)?"true":"false"),o()(n).call(n,'[name="required"]').val(i.checkBox(t.config.required)?"true":"false"),o()(n).call(n,'[name="sortable"]').val(i.checkBox(t.config.sortable)?"true":"false"),o()(n).call(n,'[name="searchable"]').val(i.checkBox(t.config.searchable)?"true":"false"),o()(n).call(n,'[data-name="use"]').prop("checked",i.checkBox(t.config.use)),o()(n).call(n,'[data-name="required"]').prop("checked",i.checkBox(t.config.required)),o()(n).call(n,'[data-name="searchable"]').prop("checked",i.checkBox(t.config.searchable)),i.getSkinOption(n)}})},this.checkBox=function(t){var e=!1;return null==t||"false"==t?e=!1:("true"==t||1==t)&&(e=!0),e},this.destroy=function(t){if(!1!==confirm("이동작은 되돌릴 수 없습니다. 계속하시겠습니까?")){var e=r()(t).closest("tr").data("id"),n={group:this.group,databaseName:this.databaseName,id:e},a=this;window.XE.ajax({context:this.$container[0],type:"post",dataType:"json",data:n,url:window.XE.route("manage.dynamicField.destroy"),success:function(t){var e=t.id;t.id==t.updateid&&a.openStep("close"),a.removeRow(e)}})}},this.getSkinOption=function(t){var e=t.serialize(),n=this;o()(t).call(t,".__xe_additional_configure").html(""),""!=o()(t).call(t,'[name="typeId"]').val()&&window.XE.ajax({context:this.$container.$modal.$body[0],type:"get",dataType:"json",data:e,url:window.XE.route("manage.dynamicField.getSkinOption"),success:function(e){n.skinOptions(t,e.skins,e.skinId)}})},this.skinOptions=function(t,e,n){var a=o()(t).call(t,'[name="skinId"]');for(var i in o()(a).call(a,"option").remove(),e){var c=r()("<option>").attr("value",i).text(e[i]);a.append(c)}null!=n&&""!=n&&a.val(n),a.prop("disabled",!1),this.getAdditionalConfigure(t)},this.getAdditionalConfigure=function(t){var e={};t.serializeArray().forEach((function(t){e[t.name]=t.value})),window.XE.get("manage.dynamicField.getAdditionalConfigure",e,{headers:{"X-XE-Async-Expose":!0}}).then((function(e){o()(t).call(t,".__xe_additional_configure").html(e.data.result)}))},this.store=function(t){var e,n=o()(e=this.$container.$modal.$body).call(e,"form"),a=this;try{this.validateCheck(n)}catch(t){return}var i=n.serialize();window.XE.ajax({context:this.$container.$modal.$body[0],type:"post",dataType:"json",data:i,url:n.attr("action"),success:function(e){a.addrow(e),a.close(t)}})},this.setValidateRule=function(t,e){var n=this.validator.getRuleName(t);null!=e&&null!=n&&this.validator.setRules(n,e)},this.validateCheck=function(t){this.validator.check(t)}};e.default=l;var d=new l;void 0!==window.dynamicFieldData&&void 0!==window.dynamicFieldData.group&&void 0!==window.dynamicFieldData.databaseName&&(d.init(window.dynamicFieldData.group,window.dynamicFieldData.databaseName),d.getList())},8:function(t,e,n){t.exports=n(1)(27)}});